<!DOCTYPE html>
<html contenteditable>
<meta charset="UTF-8" />
<link rel="stylesheet" href="/datafile/highlight/styles/default.css" type="text/css">
<script src="/datafile/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
function highlight()
{
	hljs.initHighlighting.called = false;
	hljs.initHighlighting();
}
function display()
{
	var haha = document.getElementById("display").value;
	//window.location.href = "/"+haha;

	var ajax = new XMLHttpRequest();
	ajax.open('get','/'+haha);
	ajax.send();
	ajax.onreadystatechange = function () {
	if (ajax.readyState==4 &&ajax.status==200) {
		var txt = ajax.responseText;
		txt = txt.replace(/</g,'&lt');
		txt = txt.replace(/>/g,'&gt');
		//console.log(ajax.responseText);
		document.getElementById("precode1").innerHTML = txt;
		highlight();
	}
	}
}
function search()
{
	var haha = document.getElementById("search").value;

	var ajax = new XMLHttpRequest();
	ajax.open('get','/?'+haha);
	ajax.send();
	ajax.onreadystatechange = function () {
	if (ajax.readyState==4 &&ajax.status==200) {
		var txt = ajax.responseText;
		txt = txt.replace(/</g,'&lt');
		txt = txt.replace(/>/g,'&gt');
		//console.log(ajax.responseText);
		document.getElementById("precode2").innerHTML = txt;
		highlight();
	}
	}
}
function enter1()
{
	if(event.keyCode == 13)display();
}
function enter2()
{
	if(event.keyCode == 13)search();
}
window.onload=function() {
	document.onkeydown=function(ev) {
	}
}
</script>
<style>
*{margin:0; padding:0;}
.outbox{
	width:50%;
	float:left;
}
.inbox{
	border-style:solid;
	border-width:1px;
}
</style>
<body style="width:100%;height:100%;background-color:#cccccc">

<div class="outbox">
<div>
	<input id="display" type="search" value="main.c" onkeydown="enter1()" style="margin-left:25%;width:40%;"></input>
	<input type="button" value="display" onclick="display()" style="width:10%;"></input>
	<div style="clear:both"></div>
</div>
<pre class="inbox"><code id="precode1">#include&ltstdio.h&gt
void main()
{
	printf("fuckyou\n");
}</code></pre>
</div>

<div class="outbox">
<div>
	<input id="search" type="search" value="start_kernel" onkeydown="enter2()" style="margin-left:25%;width:40%;"></input>
	<input type="button" value="search" onclick="search()" style="width:10%;"></input>
	<div style="clear:both"></div>
</div>
<pre class="inbox"><code id="precode2">#include&ltstdio.h&gt
void main()
{
	printf("fuckyou\n");
}</code></pre>
</div>

</body>
</html>
